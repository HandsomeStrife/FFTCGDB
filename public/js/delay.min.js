(function($){$.fn.delayedChange=function(options){var settings=$.extend({delay:2000,eventNamespace:undefined,extra:undefined},options);this.each(function(){var timeoutRef,previousValue,$this=$(this);previousValue=$this.val();$this.on('input propertychange',function(){var val;if(window.event&&event.type=="propertychange"&&event.propertyName!="value"){return}val=$this.val();if(previousValue==val){return}previousValue=val;if(timeoutRef){clearTimeout(timeoutRef)}timeoutRef=setTimeout(function(){var eventName='delayedchange';if($this.val()==val){timeoutRef=undefined;if(settings.eventNamespace){eventName=eventName+'.'+settings.eventNamespace}$this.trigger(eventName,[{delay:settings.delay,eventNamespace:settings.eventNamespace,extra:settings.extra}])}},settings.delay)})});return this}})(jQuery);
